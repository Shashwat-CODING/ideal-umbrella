import{e as p,u as o}from"./index-BIf49YX_.js";async function d(s,l=!1,i){const{invidious:n}=p,u=r=>fetch(`${r}/streams/${s}`,{signal:i}).then(t=>t.json()).then(t=>{if(t.audioStreams.length)return t;throw new Error(t.message)}),c=r=>fetch(`${r}/api/v1/videos/${s}`,{signal:i}).then(t=>t.json()).then(t=>{if(t&&"adaptiveFormats"in t)return t;throw new Error(t.error)}).then(t=>({title:t.title,uploader:t.author,duration:t.lengthSeconds,uploaderUrl:t.authorUrl,liveStream:t.liveNow,subtitles:t.captions.map(e=>({name:e.label,url:e.url})),relatedStreams:t.recommendedVideos.map(e=>({url:"/watch?v="+e.videoId,title:e.title,uploaderName:e.author,duration:e.lengthSeconds,uploaderUrl:e.authorUrl,type:"stream"})),videoStreams:t.adaptiveFormats.filter(e=>e.type.startsWith("video")).map(e=>({url:e.url,quality:e.quality,resolution:e.resolution,codec:e.type})),audioStreams:t.adaptiveFormats.filter(e=>e.type.startsWith("audio")).map(e=>({bitrate:parseInt(e.bitrate),codec:e.encoding||(e.type.includes("webm")?"opus":"aac"),contentLength:parseInt(e.clen),quality:Math.floor(parseInt(e.bitrate)/1024)+" kbps",mimeType:e.type,url:e.url}))})),m=r=>l?r:u("").catch(()=>r);o("index",0);const a=(r=0)=>c(n[r]).catch(t=>r+1===n.length?(o("index",0),m(t)):(o("index",r+1),a(r+1)));return a()}export{d as default};
