const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/virtual_pwa-register-BYY5sI8_.js","assets/index-BIf49YX_.js","assets/index-DlqJfLT7.css"])))=>i.map(i=>d[i]);
import{A as t,a as _,u as r,B as x,n as m,C as E,D as P,E as b,F as c,v as A,s as v,G as C,p as F,_ as L}from"./index-BIf49YX_.js";async function q(){const n=location.pathname.split("/");if(n.length===3&&n[1]==="s"){const e=n[2];e&&(t.set("s",e),history.replaceState({},"",`/?s=${e}`))}const{shareAction:l}=_;function y(e){let s=e;const u={$:"invidious","&":"inv","#":"iv","~":"com"};for(const g in u){const S=g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),w=new RegExp(S,"g");s=s.replace(w,u[g])}return s}await fetch("https://raw.githubusercontent.com/n-ce/Uma/main/iv.txt").then(e=>e.text()).then(y).then(e=>{r({invidious:e.split(",").map(s=>`https://${s}`),index:0})}).catch(()=>{r("snackbar","⚠️  Failed to Fetch Instances from Uma")});const d=t.get("collection"),i=t.get("si"),p=t.get("channel"),f=t.get("playlist");d||i?x(d||i,!!i):p?m(p,"channel"):f&&m(f,"playlist");const h=t.get("q");if(h){const e=t.get("f")||"all";E("searchFilter",e),P("query",h)}const o=b(t.get("url")||t.get("text")),a=t.get("s")||o;if(a)if(o&&l==="watch")c("stream","id",a),c("isWatching",!0);else if(o&&l==="download")A(a);else{t.size===1&&v("player","state",!0),await C(a);const e=t.get("t");e&&(F.audio.currentTime=Number(e),c("currentTime",Number(e)))}document.addEventListener("click",e=>{const s=document.querySelector("details:open");s?.firstElementChild?.contains(e.target)||s?.removeAttribute("open")}),await L(()=>import("./virtual_pwa-register-BYY5sI8_.js"),__vite__mapDeps([0,1,2])).then(e=>{const s=e.registerSW({onNeedRefresh(){r({updater:s}),v("updater","state",!0)}})})}export{q as default};
