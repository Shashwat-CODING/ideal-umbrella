import{w as T,u as M,R as t,m as c,T as G,j as H,f as B,g as P,t as a,U as K,V as O,k as F,F as X,G as Z,s as q,i,W as U,c as o,S as C,b as N,X as L,Y as ee,Z as Q,$ as te,a0 as W,a1 as Y,a2 as le,y as J,d as V,a3 as z,a as j,o as ie,a4 as re,z as ne,C as ae,B as se,a5 as oe,r as ce,P as R,K as de,a6 as ue,Q as me}from"./index-BIf49YX_.js";import{S as ge}from"./sortable.esm-DdTU3J9A.js";import{S as he}from"./StreamItem-BlEJqt2S.js";import{C as pe}from"./CollectionSelector-D98OszmA.js";import{L as $e}from"./ListItem-CEFBtWP_.js";function fe(){const{list:h,name:s}=t,r=prompt(c("list_set_title"),s);r&&(G(r),H(r,h),M("snackbar",c("list_imported",r)))}function _e(h){T("isLoading",!0),fetch(location.origin+"/blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(s=>s.text()).then(s=>{const r="text/plain",I=new Blob([s],{type:r}),d=[new ClipboardItem({[r]:I})];navigator.clipboard.write(d),M("snackbar","Collection link copied to clipboard!")}).catch(()=>{M("snackbar","Failed to share collection.")}).finally(()=>T("isLoading",!1))}var be=a("<li id=subscribeListBtn><i>"),ve=a("<li id=viewOnYTBtn><i class=ri-external-link-line>"),ke=a("<li id=clearListBtn><i class=ri-close-large-line>"),Ce=a("<li id=deleteCollectionBtn><i class=ri-delete-bin-2-line>"),Se=a("<li id=renameCollectionBtn><i class=ri-edit-line>"),ye=a("<li id=shareCollectionBtn><i class=ri-link>"),we=a("<li id=exportCollectionBtn><i class=ri-export-line>"),xe=a("<li id=radioCollectionBtn><i class=ri-radio-line>"),Le=a("<li id=sortCollectionBtn><i class=ri-draggable>"),Be=a('<details><summary><i aria-label="More Options"class=ri-more-2-fill></i></summary><ul id=listTools><li id=playAllBtn><i class=ri-play-large-line></i></li><li id=enqueueAllBtn><i class=ri-list-check-2></i></li><li id=importListBtn><i class=ri-import-line>');function Me(h){const[s,r]=B(!1);P(()=>{r(W(t.type).some(d=>d.id===t.id))});function I(){const{name:d,type:$,id:_,uploader:y,thumbnail:f}=t;if($==="collection")return;let b=W($);if(s())b=b.filter(e=>e.id!==_);else{const e={id:_,name:d,thumbnail:Y(f)};$==="playlists"&&(e.uploader=y),b.push(e)}le($,b),r(!s())}return(()=>{var d=Be(),$=d.firstChild,_=$.nextSibling,y=_.firstChild;y.firstChild;var f=y.nextSibling;f.firstChild;var b=f.nextSibling;return b.firstChild,y.$$click=()=>{K("list",[]);const e=O(t.id);F(e),X("stream",e[0]),Z(e[0].id),q("queue","state",!0)},i(y,()=>c("list_play"),null),f.$$click=()=>{const e=O(t.id);F(e),q("queue","state",!0)},i(f,()=>c("list_enqueue"),null),U(b,"click",fe,!0),i(b,()=>c("list_import"),null),i(_,o(C,{get when(){return L(()=>t.type==="channels")()&&!t.name.startsWith("Artist")||t.type==="playlists"},get children(){return[(()=>{var e=be(),p=e.firstChild;return e.$$click=I,i(e,()=>s()?"Saved to Library":"Save to Library",null),N(()=>J(p,"ri-star-"+(s()?"fill":"line"))),e})(),(()=>{var e=ve();return e.firstChild,i(e,()=>t.name||"View on YouTube",null),e})()]}}),null),i(_,o(C,{get when(){return L(()=>t.type==="collection")()&&t.isReversed},get children(){var e=ke();return e.firstChild,i(e,()=>c("list_clear_all"),null),e}}),null),i(_,o(C,{get when(){return L(()=>t.type==="collection")()&&!t.isReversed},get children(){return[(()=>{var e=Ce();return e.firstChild,e.$$click=()=>{const{id:p}=t;confirm(c("list_prompt_delete",p))&&(ee(p),Q())},i(e,()=>c("list_delete"),null),e})(),(()=>{var e=Se();return e.firstChild,e.$$click=()=>{const p=t.name,S=prompt(c("list_rename_prompt"),p);S&&S!==p&&(te(p,S),T("name",S),T("id",S),M("snackbar",c("list_rename_success")))},i(e,()=>c("list_rename"),null),e})(),(()=>{var e=ye();return e.firstChild,e.$$click=()=>_e(O(t.id)),i(e,()=>c("list_share"),null),e})(),(()=>{var e=we();return e.firstChild,e.$$click=()=>{const p=O(t.id);console.log(p);const S=JSON.stringify(p,null,2);navigator.clipboard.writeText(S).then(()=>{M("snackbar",c("list_export_success"))}).catch(E=>{M("snackbar",c("list_export_error")+E)})},i(e,()=>c("list_export"),null),e})(),(()=>{var e=xe();return e.firstChild,i(e,()=>c("list_radio"),null),e})(),(()=>{var e=Le();return e.firstChild,U(e,"click",h.toggleSort,!0),i(e,()=>c("list_sort"),null),e})()]}}),null),d})()}V(["click"]);var Ie=a("<div class=listContainer>"),Te=a("<i class=ri-loader-3-line>");function Ae(h){return o(C,{get when(){return!t.isLoading},get fallback(){return Te()},get children(){var s=Ie();return i(s,o(z,{get each(){return t.list},children:r=>o(he,{get id(){return r.id||""},get author(){return r.author},get title(){return r.title||""},get duration(){return r.duration||""},get authorId(){return r.authorId},get draggable(){return h.draggable},get context(){return{id:t.name||t.id,src:t.type}},get mark(){return h.mark}})})),s}})}var Oe=a('<i aria-label="Remove Marked"class=ri-indeterminate-circle-line>'),Ne=a('<i aria-label="Enqueue Marked"class=ri-list-check-2>'),qe=a('<i aria-label="Add to Collection">'),Ee=a('<div class=markBar><i aria-label="Mark or Unmark All"class=ri-checkbox-multiple-fill>'),Re=a("<p id=listTitle>"),Fe=a("<span><label for=sortMenu>Sort Order :</label><select id=sortMenu><option value=modified>Modified</option><option value=name>Name</option><option value=artist>Artist</option><option value=duration>Duration"),Ue=a("<div class=albums-carousel>"),De=a("<img class=list-thumbnail>"),We=a('<section id=listSection><header><div class=right-group><i aria-label="Mark Mode"></i><i aria-label=close class=ri-close-large-line>');function Ve(){let h,s;const[r,I]=B(!1),[d,$]=B([]),[_,y]=B(!1),[f,b]=B(!1),[e,p]=B(j.sortOrder);function S(){const m=document.querySelector(".listContainer");s=new ge(m,{handle:".ri-draggable",onUpdate(v){v.oldIndex==null||v.newIndex==null||T("list",u=>{const g=[...u],[w]=g.splice(v.oldIndex,1);g.splice(v.newIndex,0,w);const x=t.id,l=g.map(n=>n.id);return de(x,l),ue(x),[...g]})}})}ie(()=>{me("list",h),h.scrollTo(0,0),q("home","state",!1)}),P(()=>{e()==="modified"&&f()?S():(s?.destroy(),s=void 0)}),re(()=>{s?.destroy(),s=void 0});const E=()=>(()=>{var m=Ee(),v=m.firstChild;return v.$$click=()=>{d().length===t.list.length?$([]):$(t.list.map(u=>u.id))},i(m,o(C,{get when(){return d().length},get children(){return[o(C,{get when(){return t.type==="collection"},get children(){var u=Oe();return u.$$click=()=>{ce(t.name,d())},u}}),(()=>{var u=Ne();return u.$$click=()=>{const g=d().map(w=>t.list.find(x=>x.id===w)).filter(Boolean);g.length&&(F(g),q("queue","state",!0))},u})(),(()=>{var u=qe();return i(u,o(pe,{get data(){return d().map(g=>t.list.find(w=>w.id===g)).filter(Boolean)}})),u})()]}}),null),m})();return(()=>{var m=We(),v=m.firstChild,u=v.firstChild,g=u.firstChild,w=g.nextSibling,x=h;return typeof x=="function"?ne(x,m):h=m,i(v,o(C,{get when(){return!r()},get fallback(){return o(E,{})},get children(){var l=Re();return l.$$click=()=>y(!_()),i(l,(()=>{var n=L(()=>!!_());return()=>n()?`${t.length} streams`:t.name})()),l}}),u),g.$$click=()=>{I(!r()),r()||$([])},U(w,"click",Q,!0),i(v,o(Me,{toggleSort:()=>b(!f())}),null),i(m,o(C,{get when(){return f()},get children(){var l=Fe(),n=l.firstChild,k=n.nextSibling;return k.addEventListener("change",A=>{const D=A.target.value;p(D),ae("sortOrder",D),se(t.id)}),N(()=>k.value=e()),l}}),null),i(m,o(C,{get when(){return L(()=>!!t.name.startsWith("Artist"))()&&t.artistAlbums?.length},get children(){var l=Ue();return i(l,o(z,{get each(){return t.artistAlbums},children:n=>o($e,{get title(){return n.title},get stats(){return n.subtitle},get thumbnail(){return oe(Y(n.thumbnail),"")},get uploaderData(){return t.name.replace("Artist - ","")},get url(){return`/playlist/${n.id}`}})})),l}}),null),i(m,o(C,{get when(){return L(()=>!!j.loadImage)()&&t.name.startsWith("Album")},get children(){var l=De();return N(n=>{var k=t.thumbnail.replace("w=360","w=720"),A=t.name;return k!==n.e&&R(l,"src",n.e=k),A!==n.t&&R(l,"alt",n.t=A),n},{e:void 0,t:void 0}),l}}),null),i(m,o(Ae,{get draggable(){return L(()=>e()==="modified")()&&f()},mark:{mode:r,set:l=>{$(n=>n.includes(l)?n.filter(k=>k!==l):[...n,l])},get:l=>d().includes(l)}}),null),N(l=>{var n=r(),k=r()?"ri-checkbox-fill":"ri-checkbox-line";return n!==l.e&&R(g,"aria-checked",l.e=n),k!==l.t&&J(g,l.t=k),l},{e:void 0,t:void 0}),m})()}V(["click"]);export{Ve as default};
