const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D5e6GZdo.js","assets/index-D5CKZnJG.css","assets/index-C4YQJY3h.js","assets/sortable.esm-DdTU3J9A.js","assets/StreamItem-BlEJqt2S.js","assets/StreamItem-B2jRbmN2.css","assets/CollectionSelector-D98OszmA.js","assets/ListItem-CEFBtWP_.js","assets/ListItem-soBNhHLN.css","assets/index-CtC1Zqtd.css","assets/index-jo-9y5BJ.js","assets/index-BicfsP2v.css","assets/index-C5l1fWA0.js","assets/PlayNextButton-QOKvackA.js","assets/MediaDetails-CaxieZWM.js","assets/index-ndP8UnPa.css","assets/index-CL6Yb17B.js","assets/hub-Co9BINa5.js","assets/index-DA4zRseK.css","assets/index-B8b3wyfx.js","assets/index-MuV80cnf.css","assets/setDiscoveries-DiQ_O5bR.js","assets/MiniPlayer-BZ528-5B.js","assets/MiniPlayer-C_Z6PjRT.css","assets/index-C5f6N8Yh.js","assets/index-5hI-_u8P.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const p={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return ft(this.context.count)},getNextContextId(){return ft(this.context.count++)}};function ft(e){const t=String(e),n=t.length-1;return p.context.id+(n?String.fromCharCode(96+n):"")+t}function ye(e){p.context=e}const St=!1,Nt=(e,t)=>e===t,U=Symbol("solid-proxy"),Ut=typeof Proxy=="function",Ge=Symbol("solid-track"),Pe={equals:Nt};let At=Ot;const K=1,$e=2,It={owned:null,cleanups:null,context:null,owner:null},Ke={};var v=null;let Je=null,qt=null,_=null,O=null,H=null,Ne=0;function _e(e,t){const n=_,s=v,i=e.length===0,o=t===void 0?s:t,r=i?It:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=i?e:()=>e(()=>C(()=>we(r)));v=r,_=null;try{return W(a,!0)}finally{_=n,v=s}}function G(e,t){t=t?Object.assign({},Pe,t):Pe;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),kt(n,i));return[Et.bind(n),s]}function Ft(e,t,n){const s=Ue(e,t,!0,K);fe(s)}function Ce(e,t,n){const s=Ue(e,t,!1,K);fe(s)}function Ht(e,t,n){At=en;const s=Ue(e,t,!1,K);s.user=!0,H?H.push(s):fe(s)}function $(e,t,n){n=n?Object.assign({},Pe,n):Pe;const s=Ue(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,fe(s),Et.bind(s)}function Wt(e){return e&&typeof e=="object"&&"then"in e}function Bt(e,t,n){let s,i,o;s=!0,i=e,o={};let r=null,a=Ke,l=null,c=!1,u="initialValue"in o,f=typeof s=="function"&&$(s);const m=new Set,[y,L]=(o.storage||G)(o.initialValue),[D,se]=G(void 0),[ge,x]=G(void 0,{equals:!1}),[R,j]=G(u?"ready":"unresolved");p.context&&(l=p.getNextContextId(),o.ssrLoadFrom==="initial"?a=o.initialValue:p.load&&p.has(l)&&(a=p.load(l)));function P(E,A,N,T){return r===E&&(r=null,T!==void 0&&(u=!0),(E===a||A===a)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(T,{value:A})),a=Ke,He(A,N)),A}function He(E,A){W(()=>{A===void 0&&L(()=>E),j(A!==void 0?"errored":u?"ready":"unresolved"),se(A);for(const N of m.keys())N.decrement();m.clear()},!1)}function We(){const E=Xt,A=y(),N=D();if(N!==void 0&&!r)throw N;return _&&_.user,A}function Be(E=!0){if(E!==!1&&c)return;c=!1;const A=f?f():s;if(A==null||A===!1){P(r,C(y));return}let N;const T=a!==Ke?a:C(()=>{try{return i(A,{value:y(),refetching:E})}catch(me){N=me}});if(N!==void 0){P(r,void 0,Te(N),A);return}else if(!Wt(T))return P(r,T,void 0,A),T;return r=T,"v"in T?(T.s===1?P(r,T.v,void 0,A):P(r,void 0,Te(T.v),A),T):(c=!0,queueMicrotask(()=>c=!1),W(()=>{j(u?"refreshing":"pending"),x()},!1),T.then(me=>P(T,me,void 0,A),me=>P(T,void 0,Te(me),A)))}Object.defineProperties(We,{state:{get:()=>R()},error:{get:()=>D()},loading:{get(){const E=R();return E==="pending"||E==="refreshing"}},latest:{get(){if(!u)return We();const E=D();if(E&&!r)throw E;return y()}}});let ut=v;return f?Ft(()=>(ut=v,Be(!1))):Be(!1),[We,{refetch:E=>Qt(ut,()=>Be(E)),mutate:L}]}function Kt(e){return W(e,!1)}function C(e){if(_===null)return e();const t=_;_=null;try{return e()}finally{_=t}}function Jt(e){Ht(()=>C(e))}function Yt(e){return v===null||(v.cleanups===null?v.cleanups=[e]:v.cleanups.push(e)),e}function Xe(){return _}function Qt(e,t){const n=v,s=_;v=e,_=null;try{return W(t,!0)}catch(i){st(i)}finally{v=n,_=s}}const[ls,cs]=G(!1);function Gt(e){const t=$(e),n=$(()=>ze(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let Xt;function Et(){if(this.sources&&this.state)if(this.state===K)fe(this);else{const e=O;O=null,W(()=>Re(this),!1),O=e}if(_){const e=this.observers?this.observers.length:0;_.sources?(_.sources.push(this),_.sourceSlots.push(e)):(_.sources=[this],_.sourceSlots=[e]),this.observers?(this.observers.push(_),this.observerSlots.push(_.sources.length-1)):(this.observers=[_],this.observerSlots=[_.sources.length-1])}return this.value}function kt(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&W(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],r=Je&&Je.running;r&&Je.disposed.has(o),(r?!o.tState:!o.state)&&(o.pure?O.push(o):H.push(o),o.observers&&Tt(o)),r||(o.state=K)}if(O.length>1e6)throw O=[],new Error},!1)),t}function fe(e){if(!e.fn)return;we(e);const t=Ne;zt(e,e.value,t)}function zt(e,t,n){let s;const i=v,o=_;_=v=e;try{s=e.fn(t)}catch(r){return e.pure&&(e.state=K,e.owned&&e.owned.forEach(we),e.owned=null),e.updatedAt=n+1,st(r)}finally{_=o,v=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?kt(e,s):e.value=s,e.updatedAt=n)}function Ue(e,t,n,s=K,i){const o={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:v,context:v?v.context:null,pure:n};return v===null||v!==It&&(v.owned?v.owned.push(o):v.owned=[o]),o}function De(e){if(e.state===0)return;if(e.state===$e)return Re(e);if(e.suspense&&C(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ne);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===K)fe(e);else if(e.state===$e){const s=O;O=null,W(()=>Re(e,t[0]),!1),O=s}}function W(e,t){if(O)return e();let n=!1;t||(O=[]),H?n=!0:H=[],Ne++;try{const s=e();return Zt(n),s}catch(s){n||(H=null),O=null,st(s)}}function Zt(e){if(O&&(Ot(O),O=null),e)return;const t=H;H=null,t.length&&W(()=>At(t),!1)}function Ot(e){for(let t=0;t<e.length;t++)De(e[t])}function en(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:De(s)}if(p.context){if(p.count){p.effects||(p.effects=[]),p.effects.push(...e.slice(0,n));return}ye()}for(p.effects&&(p.done||!p.count)&&(e=[...p.effects,...e],n+=p.effects.length,delete p.effects),t=0;t<n;t++)De(e[t])}function Re(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const i=s.state;i===K?s!==t&&(!s.updatedAt||s.updatedAt<Ne)&&De(s):i===$e&&Re(s,t)}}}function Tt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=$e,n.pure?O.push(n):H.push(n),n.observers&&Tt(n))}}function we(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),r=n.observerSlots.pop();s<i.length&&(o.sourceSlots[r]=s,i[s]=o,n.observerSlots[s]=r)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)we(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)we(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Te(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function st(e,t=v){throw Te(e)}function ze(e){if(typeof e=="function"&&!e.length)return ze(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=ze(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}const tn=Symbol("fallback");function dt(e){for(let t=0;t<e.length;t++)e[t]()}function nn(e,t,n={}){let s=[],i=[],o=[],r=0,a=t.length>1?[]:null;return Yt(()=>dt(o)),()=>{let l=e()||[],c=l.length,u,f;return l[Ge],C(()=>{let y,L,D,se,ge,x,R,j,P;if(c===0)r!==0&&(dt(o),o=[],s=[],i=[],r=0,a&&(a=[])),n.fallback&&(s=[tn],i[0]=_e(He=>(o[0]=He,n.fallback())),r=1);else if(r===0){for(i=new Array(c),f=0;f<c;f++)s[f]=l[f],i[f]=_e(m);r=c}else{for(D=new Array(c),se=new Array(c),a&&(ge=new Array(c)),x=0,R=Math.min(r,c);x<R&&s[x]===l[x];x++);for(R=r-1,j=c-1;R>=x&&j>=x&&s[R]===l[j];R--,j--)D[j]=i[R],se[j]=o[R],a&&(ge[j]=a[R]);for(y=new Map,L=new Array(j+1),f=j;f>=x;f--)P=l[f],u=y.get(P),L[f]=u===void 0?-1:u,y.set(P,f);for(u=x;u<=R;u++)P=s[u],f=y.get(P),f!==void 0&&f!==-1?(D[f]=i[u],se[f]=o[u],a&&(ge[f]=a[u]),f=L[f],y.set(P,f)):o[u]();for(f=x;f<c;f++)f in D?(i[f]=D[f],o[f]=se[f],a&&(a[f]=ge[f],a[f](f))):i[f]=_e(m);i=i.slice(0,r=c),s=l.slice(0)}return i});function m(y){if(o[f]=y,a){const[L,D]=G(f);return a[f]=D,t(l[f],L)}return t(l[f])}}}function V(e,t){return C(()=>e(t||{}))}function Ie(){return!0}const sn={get(e,t,n){return t===U?n:e.get(t)},has(e,t){return t===U?!0:e.has(t)},set:Ie,deleteProperty:Ie,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Ie,deleteProperty:Ie}},ownKeys(e){return e.keys()}};function Ye(e){return(e=typeof e=="function"?e():e)?e:{}}function on(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function us(...e){let t=!1;for(let r=0;r<e.length;r++){const a=e[r];t=t||!!a&&U in a,e[r]=typeof a=="function"?(t=!0,$(a)):a}if(Ut&&t)return new Proxy({get(r){for(let a=e.length-1;a>=0;a--){const l=Ye(e[a])[r];if(l!==void 0)return l}},has(r){for(let a=e.length-1;a>=0;a--)if(r in Ye(e[a]))return!0;return!1},keys(){const r=[];for(let a=0;a<e.length;a++)r.push(...Object.keys(Ye(e[a])));return[...new Set(r)]}},sn);const n={},s=Object.create(null);for(let r=e.length-1;r>=0;r--){const a=e[r];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!s[u])s[u]=f.get?{enumerable:!0,configurable:!0,get:on.bind(n[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const m=n[u];m&&(f.get?m.push(f.get.bind(a)):f.value!==void 0&&m.push(()=>f.value))}}}const i={},o=Object.keys(s);for(let r=o.length-1;r>=0;r--){const a=o[r],l=s[a];l&&l.get?Object.defineProperty(i,a,l):i[a]=l?l.value:void 0}return i}function J(e){let t,n;const s=i=>{const o=p.context;if(o){const[a,l]=G();p.count||(p.count=0),p.count++,(n||(n=e())).then(c=>{!p.done&&ye(o),p.count--,l(()=>c.default),ye()}),t=a}else if(!t){const[a]=Bt(()=>(n||(n=e())).then(l=>l.default));t=a}let r;return $(()=>(r=t())?C(()=>{if(!o||p.done)return r(i);const a=p.context;ye(o);const l=r(i);return ye(a),l}):"")};return s.preload=()=>n||((n=e()).then(i=>t=()=>i.default),n),s}const Lt=e=>`Stale read from <${e}>.`;function rn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return $(nn(()=>e.each,e.children,t||void 0))}function Ee(e){const t=e.keyed,n=$(()=>e.when,void 0,void 0),s=t?n:$(n,void 0,{equals:(i,o)=>!i==!o});return $(()=>{const i=s();if(i){const o=e.children;return typeof o=="function"&&o.length>0?C(()=>o(t?i:()=>{if(!C(s))throw Lt("Show");return n()})):o}return e.fallback},void 0,void 0)}function fs(e){const t=Gt(()=>e.children),n=$(()=>{const s=t(),i=Array.isArray(s)?s:[s];let o=()=>{};for(let r=0;r<i.length;r++){const a=r,l=i[r],c=o,u=$(()=>c()?void 0:l.when,void 0,void 0),f=l.keyed?u:$(u,void 0,{equals:(m,y)=>!m==!y});o=()=>c()||(f()?[a,u,l]:void 0)}return o});return $(()=>{const s=n()();if(!s)return e.fallback;const[i,o,r]=s,a=r.children;return typeof a=="function"&&a.length>0?C(()=>a(r.keyed?o():()=>{if(C(n)()?.[0]!==i)throw Lt("Match");return o()})):a},void 0,void 0)}function ds(e){return e}const an=e=>$(()=>e());function ln(e,t,n){let s=n.length,i=t.length,o=s,r=0,a=0,l=t[i-1].nextSibling,c=null;for(;r<i||a<o;){if(t[r]===n[a]){r++,a++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===r){const u=o<s?a?n[a-1].nextSibling:n[o-a]:l;for(;a<o;)e.insertBefore(n[a++],u)}else if(o===a)for(;r<i;)(!c||!c.has(t[r]))&&t[r].remove(),r++;else if(t[r]===n[o-1]&&n[a]===t[i-1]){const u=t[--i].nextSibling;e.insertBefore(n[a++],t[r++].nextSibling),e.insertBefore(n[--o],u),t[i]=n[o]}else{if(!c){c=new Map;let f=a;for(;f<o;)c.set(n[f],f++)}const u=c.get(t[r]);if(u!=null)if(a<u&&u<o){let f=r,m=1,y;for(;++f<i&&f<o&&!((y=c.get(t[f]))==null||y!==u+m);)m++;if(m>u-a){const L=t[r];for(;a<u;)e.insertBefore(n[a++],L)}else e.replaceChild(n[a++],t[r++])}else r++;else t[r++].remove()}}}const ht="_$DX_DELEGATE";function cn(e,t,n,s={}){let i;return _e(o=>{i=o,t===document?e():Le(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{i(),t.textContent=""}}function qe(e,t,n,s){let i;const o=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},r=t?()=>C(()=>document.importNode(i||(i=o()),!0)):()=>(i||(i=o())).cloneNode(!0);return r.cloneNode=r,r}function un(e,t=window.document){const n=t[ht]||(t[ht]=new Set);for(let s=0,i=e.length;s<i;s++){const o=e[s];n.has(o)||(n.add(o),t.addEventListener(o,fn))}}function hs(e,t,n){ot(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function ps(e,t){ot(e)||(t==null?e.removeAttribute("class"):e.className=t)}function gs(e,t,n,s){if(s)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n,typeof n!="function"&&n)}function ms(e,t,n){return C(()=>e(t,n))}function Le(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return xe(e,t,s,n);Ce(i=>xe(e,t(),i,n),s)}function ot(e){return!!p.context&&!p.done&&(!e||e.isConnected)}function fn(e){if(p.registry&&p.events&&p.events.find(([l,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,s=e.target,i=e.currentTarget,o=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),r=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},a=()=>{for(;r()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),p.registry&&!p.done&&(p.done=_$HY.done=!0),e.composedPath){const l=e.composedPath();o(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!r());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===i)break}}else a();o(s)}function xe(e,t,n,s,i){const o=ot(e);if(o){!n&&(n=[...e.childNodes]);let l=[];for(let c=0;c<n.length;c++){const u=n[c];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():l.push(u)}n=l}for(;typeof n=="function";)n=n();if(t===n)return n;const r=typeof t,a=s!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,r==="string"||r==="number"){if(o||r==="number"&&(t=t.toString(),t===n))return n;if(a){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=oe(e,n,s,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||r==="boolean"){if(o)return n;n=oe(e,n,s)}else{if(r==="function")return Ce(()=>{let l=t();for(;typeof l=="function";)l=l();n=xe(e,l,n,s)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(Ze(l,t,n,i))return Ce(()=>n=xe(e,l,n,s,!0)),()=>n;if(o){if(!l.length)return n;if(s===void 0)return n=[...e.childNodes];let u=l[0];if(u.parentNode!==e)return n;const f=[u];for(;(u=u.nextSibling)!==s;)f.push(u);return n=f}if(l.length===0){if(n=oe(e,n,s),a)return n}else c?n.length===0?pt(e,l,s):ln(e,n,l):(n&&oe(e),pt(e,l));n=l}else if(t.nodeType){if(o&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=oe(e,n,s,t);oe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ze(e,t,n,s){let i=!1;for(let o=0,r=t.length;o<r;o++){let a=t[o],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))i=Ze(e,a,l)||i;else if(c==="function")if(s){for(;typeof a=="function";)a=a();i=Ze(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||i}else e.push(a),i=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return i}function pt(e,t,n=null){for(let s=0,i=t.length;s<i;s++)e.insertBefore(t[s],n)}function oe(e,t,n,s){if(n===void 0)return e.textContent="";const i=s||document.createTextNode("");if(t.length){let o=!1;for(let r=t.length-1;r>=0;r--){const a=t[r];if(i!==a){const l=a.parentNode===e;!o&&!r?l?e.replaceChild(i,a):e.insertBefore(i,n):l&&a.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const dn="modulepreload",hn=function(e){return"/"+e},gt={},d=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");i=l(n.map(c=>{if(c=hn(c),c in gt)return;gt[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":dn,u||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),u)return new Promise((y,L)=>{m.addEventListener("load",y),m.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},pn=(e,t,n)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((i,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},et=Symbol("store-raw"),le=Symbol("store-node"),F=Symbol("store-has"),Pt=Symbol("store-self");function $t(e){let t=e[U];if(!t&&(Object.defineProperty(e,U,{value:t=new Proxy(e,yn)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let i=0,o=n.length;i<o;i++){const r=n[i];s[r].get&&Object.defineProperty(e,r,{enumerable:s[r].enumerable,get:s[r].get.bind(t)})}}return t}function je(e){let t;return e!=null&&typeof e=="object"&&(e[U]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Se(e,t=new Set){let n,s,i,o;if(n=e!=null&&e[et])return n;if(!je(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let r=0,a=e.length;r<a;r++)i=e[r],(s=Se(i,t))!==i&&(e[r]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const r=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,c=r.length;l<c;l++)o=r[l],!a[o].get&&(i=e[o],(s=Se(i,t))!==i&&(e[o]=s))}return e}function Ve(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Ae(e,t,n){if(e[t])return e[t];const[s,i]=G(n,{equals:!1,internal:!0});return s.$=i,e[t]=s}function gn(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===U||t===le||(delete n.value,delete n.writable,n.get=()=>e[U][t]),n}function Ct(e){Xe()&&Ae(Ve(e,le),Pt)()}function mn(e){return Ct(e),Reflect.ownKeys(e)}const yn={get(e,t,n){if(t===et)return e;if(t===U)return n;if(t===Ge)return Ct(e),n;const s=Ve(e,le),i=s[t];let o=i?i():e[t];if(t===le||t===F||t==="__proto__")return o;if(!i){const r=Object.getOwnPropertyDescriptor(e,t);Xe()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(r&&r.get)&&(o=Ae(s,t,o)())}return je(o)?$t(o):o},has(e,t){return t===et||t===U||t===Ge||t===le||t===F||t==="__proto__"?!0:(Xe()&&Ae(Ve(e,F),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:mn,getOwnPropertyDescriptor:gn};function Me(e,t,n,s=!1){if(!s&&e[t]===n)return;const i=e[t],o=e.length;n===void 0?(delete e[t],e[F]&&e[F][t]&&i!==void 0&&e[F][t].$()):(e[t]=n,e[F]&&e[F][t]&&i===void 0&&e[F][t].$());let r=Ve(e,le),a;if((a=Ae(r,t,i))&&a.$(()=>n),Array.isArray(e)&&e.length!==o){for(let l=e.length;l<o;l++)(a=r[l])&&a.$();(a=Ae(r,"length",o))&&a.$(e.length)}(a=r[Pt])&&a.$()}function Dt(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const i=n[s];Me(e,i,t[i])}}function bn(e,t){if(typeof t=="function"&&(t=t(e)),t=Se(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const i=t[n];e[n]!==i&&Me(e,n,i)}Me(e,"length",s)}else Dt(e,t)}function be(e,t,n=[]){let s,i=e;if(t.length>1){s=t.shift();const r=typeof s,a=Array.isArray(e);if(Array.isArray(s)){for(let l=0;l<s.length;l++)be(e,[s[l]].concat(t),n);return}else if(a&&r==="function"){for(let l=0;l<e.length;l++)s(e[l],l)&&be(e,[l].concat(t),n);return}else if(a&&r==="object"){const{from:l=0,to:c=e.length-1,by:u=1}=s;for(let f=l;f<=c;f+=u)be(e,[f].concat(t),n);return}else if(t.length>1){be(e[s],t,[s].concat(n));return}i=e[s],n=[s].concat(n)}let o=t[0];typeof o=="function"&&(o=o(i,n),o===i)||s===void 0&&o==null||(o=Se(o),s===void 0||je(i)&&je(o)&&!Array.isArray(o)?Dt(i,o):Me(e,s,o))}function ne(...[e,t]){const n=Se(e||{}),s=Array.isArray(n),i=$t(n);function o(...r){Kt(()=>{s&&r.length===1?bn(n,r[0]):be(n,r)})}return[i,o]}let g={home:"",stableVolume:!1,prefetch:!1,quality:"medium",loadImage:!0,linkHost:location.origin,dlFormat:"opus",theme:"auto",landscapeSections:"2",roundness:"0.4rem",searchSuggestions:!0,searchBarLinkCapture:!0,searchFilter:"all",watchMode:"",enqueueRelatedStreams:!1,shuffle:!1,filterLT10:!1,allowDuplicates:!1,history:!0,discover:!0,volume:"100",shareAction:"play",dbsync:"",language:"",sortOrder:"modified"};const mt=localStorage.getItem("config");mt&&(g=JSON.parse(mt));function _n(e,t){g[e]=t;const n=JSON.stringify(g);localStorage.setItem("config",n)}const vn={invidious:[],index:0,useSaavn:!0,linkHost:g.linkHost||location.origin,downloadFormat:g.dlFormat,homeView:g.home},[w,b]=ne(vn),wn=J(()=>d(()=>import("./index-D5e6GZdo.js"),__vite__mapDeps([0,1]))),Sn=J(()=>d(()=>import("./index-C4YQJY3h.js"),__vite__mapDeps([2,3,4,5,6,7,8,9]))),An=J(()=>d(()=>import("./index-jo-9y5BJ.js"),__vite__mapDeps([10,4,5,3,11]))),In=J(()=>d(()=>import("./index-C5l1fWA0.js"),__vite__mapDeps([12,13,14,15]))),En=J(()=>d(()=>import("./index-CL6Yb17B.js"),__vite__mapDeps([16,17,18]))),kn=J(()=>d(()=>import("./index-B8b3wyfx.js"),__vite__mapDeps([19,20]))),X=new URL(location.href).searchParams,[M,te]=ne({queue:{ref:null,state:!1,component:An},player:{ref:null,state:!1,component:In},home:{ref:null,state:!0,component:wn},list:{ref:null,state:!1,component:Sn},settings:{ref:null,state:!1,component:En},updater:{ref:null,state:!1,component:kn}});function On(e,t){t.scrollIntoView({behavior:"smooth"}),te(e,{ref:t,state:!0})}function Tn(e){const t=Object.keys(M),n=t.indexOf(e),i=Object.entries(M).filter(o=>o[1].state&&o[0]!==e).sort((o,r)=>{const a=Math.abs(t.indexOf(o[0])-n),l=Math.abs(t.indexOf(r[0])-n);return a-l})[0]?.[1]?.ref;n>=3&&i?.scrollIntoView({behavior:"smooth"}),te(e,{ref:null,state:!1})}function B(e,t){t?X.set(e,t):X.delete(e);const n=X.toString();history.replaceState({},"",location.origin+(n&&"?")+X.toString())}const[it,ce]=ne({list:[]});function Ln(e,t={}){let n=g.allowDuplicates||t.replace?e:e.filter(s=>!it.list.some(i=>i.id===s.id));if(g.filterLT10&&(n=n.filter(s=>{const i=s.duration.split(":").map(Number);let o=0;return i.length===3?o=i[0]*3600+i[1]*60+i[2]:i.length===2&&(o=i[0]*60+i[1]),o<600})),g.shuffle)for(let s=n.length-1;s>0;s--){const i=Math.floor(Math.random()*(s+1));[n[s],n[i]]=[n[i],n[s]]}t.replace?ce("list",n):t.prepend?ce("list",s=>[...n,...s]):ce("list",s=>[...s,...n])}function yt(e,t=""){e.pause();const n="Error 403 : Unauthenticated Stream",{stream:s}=h,i=t||s.id,{index:o,invidious:r}=w,a=new URL(e.src).origin;if(e.src.endsWith("&fallback")){h.isWatching||(b("snackbar",n),I("playbackState","none"));return}if(console.log("ErrorHandler: "+e.src),o<r.length){const l=r[o];t||I("status",`Switching proxy to ${l.slice(8)}`),e.src.includes(l)?e.src=e.src.replace(l,a):e.src=e.src.replace(a,l),b("index",o+1)}else b("index",0),t||(b("snackbar",n),I("status","")),fetch("/streams/"+i).then(l=>l.json()).then(l=>{d(()=>import("./setAudioStreams-C3E88ao1.js"),[]).then(c=>c.default(l.audioStreams,e))}).catch(()=>{t||I("playbackState","none")})}const Pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",$n=()=>({audio:new Audio,playbackState:"none",context:{id:"query",src:"link"},status:"",currentTime:0,fullDuration:0,playbackRate:1,loop:!1,volume:1,stream:{title:"",author:"",authorId:"",id:"",duration:""},history:[],mediaArtwork:Pn,supportsOpus:navigator.mediaCapabilities.decodingInfo({type:"file",audio:{contentType:"audio/webm;codecs=opus"}}).then(e=>e.supported),data:void 0,immersive:!1,isMusic:!0,audioURL:"",videoURL:"",isWatching:!!g.watchMode}),[h,I]=ne($n());function Cn(){const{stream:e}=h,{list:t}=it,n=t[0];I("history",s=>[{...e},...s]),I("stream",n),ce("list",s=>s.slice(1)),rt(n.id)}function ys(){const{history:e,stream:t}=h,n=e[0];I("history",s=>s.slice(1)),ce("list",s=>[{...t},...s]),I("stream",n),rt(n.id)}_e(()=>{let e="",t=0;h.audio.onended=Cn,h.audio.onplaying=()=>{I("playbackState","playing");const{stream:i}=h,{id:o}=i;g.history&&(t=window.setTimeout(()=>{e===o&&(g.enqueueRelatedStreams&&h.isMusic&&Dn(),Bn("history",[h.stream]))},1e4))},h.audio.onpause=()=>{I("playbackState","paused"),clearTimeout(t)},h.audio.addEventListener("loadeddata",at);let n=!1;const s=setInterval(()=>{(h.history.length||X.has("url")||X.has("text")||!X.has("s"))&&(n=!0,clearInterval(s))},500);h.audio.onloadstart=()=>{console.log(h.audio.src),b("index",0),I("playbackState","paused"),I("status",""),n&&h.audio.play(),e=h.stream.id,clearTimeout(t),h.audio.playbackRate=h.playbackRate},h.audio.onwaiting=()=>{I("playbackState","loading")},h.audio.ontimeupdate=()=>{if(document.activeElement?.matches('input[type="range"]'))return;const{audio:i,lrcSync:o,fullDuration:r,isMusic:a}=h;o&&o(i.currentTime);const l=Math.floor(i.currentTime);I("currentTime",l);const{ref:c}=M.player;if(c){const{offsetHeight:f,offsetWidth:m}=c,y=a?f-m:m,L=l/r,D=Math.floor(L*y);q("--player-bp",`-${D}px 0`)}const u=X.get("t");if(u){if(a)B("t");else if(l%5===0){const f=l.toString();u!==f&&B("t",f)}}},h.audio.onloadedmetadata=()=>{I({currentTime:0,fullDuration:Math.floor(h.audio.duration)})},h.audio.oncanplaythrough=async function(){const i=g.prefetch&&it.list[0]?.id;if(!i)return;const o=await d(()=>import("./getStreamData-CCrTSrwP.js"),[]).then(a=>a.default(i,!0)),r=new Audio;r.onerror=()=>yt(r,i),"audioStreams"in o&&d(()=>import("./setAudioStreams-C3E88ao1.js"),[]).then(a=>a.default(o.audioStreams.sort((l,c)=>parseInt(l.bitrate)-parseInt(c.bitrate)),r))},h.audio.onerror=()=>yt(h.audio)});async function Dn(){const e=encodeURIComponent(h.stream.title),t=encodeURIComponent(h.stream.author.slice(0,-8));fetch(`https://ytify-zeta.vercel.app/api/tracks?title=${e}&artist=${t}&limit=10`).then(n=>n.json()).then(Ln).catch(n=>b("snackbar",`Could not get recommendations for the track: ${n.message}`))}async function Rn(e,t){const n=g.searchFilter.startsWith("music_");let i="https://ytify-backend.vercel.app"+`/api/search/suggestions?q=${encodeURIComponent(e)}`;return n&&(i+="&music=1"),de(i,t).then(o=>o.suggestions)}async function bt(e,t,n,s){let i=n,o="";n.startsWith("video_")&&([i,o]=n.split("_"));let r=`${e}/api/v1/search?q=${encodeURIComponent(t)}&page=${s}&type=${i}`;return o&&(r+=`&sort=${o}`),de(r).then(a=>a.filter(l=>{if(l.type==="video"){const c=l;return c.lengthSeconds>180&&c.viewCount>1e3}else if(l.type==="playlist")return!l.title.startsWith("Mix - ");return!0}).map(l=>{if(l.type==="video"){const c=l;return{id:c.videoId,title:c.title,author:c.author,duration:z(c.lengthSeconds),authorId:c.authorId,views:c.viewCountText,img:c.videoId,uploaded:c.publishedText,type:"video"}}else if(l.type==="channel"){const c=l;return{title:c.author,stats:`${qn(c.subCount)} subscribers`,thumbnail:ee(ve("https://"+c.authorThumbnails[0].url),""),uploaderData:c.description,url:c.authorUrl,type:"channel"}}else{const c=l;return{title:c.title,stats:`${c.videoCount} streams`,thumbnail:c.playlistThumbnail,uploaderData:c.author,url:`/playlist/${c.playlistId}`,type:"playlist"}}}))}async function xn(e){const t=g.searchFilter.substring(6),s="https://ytify-backend.vercel.app"+`/api/search?q=${encodeURIComponent(e)}&filter=${t}`;return de(s).then(i=>i.results.filter(o=>o.resultType==="artist"?o.thumbnails[0].url.includes("googleusercontent"):o.resultType==="song"?o.artists?.some(a=>a.id):!0).map(o=>{if(o.resultType==="song"||o.resultType==="video"){const r=o,a=r.artists?.find(c=>c.id),l=o.resultType==="song"?a?.name:r.artists?.[0]?.name;return{id:r.videoId,title:r.title,author:l?o.resultType==="song"?l+" - Topic":l:"Unknown",duration:z(r.duration_seconds),authorId:r.artists.length>0?r.artists[0].id:a?.id,views:"views"in r?r.views+" Plays":r.album?.name,albumId:"album"in r?r.album.id:"",img:o.resultType==="video"?o.videoId:ve(r.thumbnails[0].url||"https://i.ytimg.com/vi_webp/"+r.videoId+"/mqdefault.webp?host=i.ytimg.com"),type:o.resultType==="song"?"stream":"video"}}else if(o.resultType==="album"){const r=o;return{title:r.title,stats:r.year,thumbnail:ee(ve(r.thumbnails[0].url),""),uploaderData:r.artists?.find(a=>a.id)?.name,url:`/album/${r.browseId}`,type:"playlist"}}else{const r=o;return{title:"title"in r?r.title:r.artist,stats:"itemCount"in r?r.itemCount+" Plays":"",thumbnail:ee(ve(r.thumbnails[0].url),""),uploaderData:"author"in r?r.author:"",url:`/${o.resultType==="artist"?"artist":"playlists"}/${r.browseId}`,type:o.resultType==="artist"?"channel":"playlist"}}}))}const Rt=()=>({query:"",results:[],isLoading:!1,page:1,suggestions:{data:localStorage.getItem("searched")?.split(",")||[],index:-1,controller:new AbortController},observer:{disconnect(){}}}),[Y,k]=ne(Rt());function bs(){Y.observer.disconnect(),k(Rt()),B("q"),B("f")}function _s(e){if(e.length<3){k("suggestions","data",[]);return}k("page",1),k("suggestions","index",-1),Y.suggestions.controller.abort();const t=new AbortController;k("suggestions","controller",t),Rn(e,t.signal).then(n=>{k("suggestions","data",n)}).catch(n=>{n.name!=="AbortError"&&(b("snackbar",n.message),k("suggestions","data",[]))})}async function vs(){const{query:e,page:t,observer:n}=Y,{searchFilter:s}=g;if(!e)return;k("isLoading",!0),Y.suggestions.controller.abort(),k("suggestions","data",[]),n.disconnect();const i=localStorage.getItem("searched")?.split(",")||[];i.length===5&&i.shift();const o=e.toLowerCase();i.includes(o)||i.push(o),localStorage.setItem("searched",i.join(","));const r=s.startsWith("music_");(()=>{if(r)return xn(e);{let l=w.invidious.length-1;const c=()=>bt(w.invidious[l],e,s,t).catch(u=>{if(l>0)return l--,c();throw u});return c()}})().then(l=>{if(k("results",l),!r){k("page",t+1);const c=async()=>{const u=await bt(w.invidious[w.invidious.length-1],e,s,Y.page);if(u){const f=new Set(Y.results.map(y=>"id"in y?y.id:y.url)),m=u.filter(y=>!f.has("id"in y?y.id:y.url));k("results",[...Y.results,...m]),k("page",Y.page+1)}};k("observer",xt(c)),l.length<5&&c()}}).catch(l=>{b("snackbar",l.message),k("results",[])}).finally(()=>{k("isLoading",!1)}),B("q",e),B("f",s==="all"?"":s)}function xt(e){const t=document.querySelector(".searchlist a:nth-last-child(5)");if(!t)return{disconnect(){}};const n=new IntersectionObserver(async(s,i)=>{for(const o of s)o.isIntersecting&&(i.disconnect(),await e(),k("observer",xt(e)))});return n.observe(t),n}async function jn(e){return fetch(`https://ytify-zeta.vercel.app/api/artists?id=${e}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})}async function Vn(e,t){return de(`${t}/api/v1/mixes/${e}`).then(n=>n.videos.map(s=>({id:s.videoId,title:s.title,authorId:s.authorId,author:s.author,duration:z(s.lengthSeconds)})))}async function Qe(e,t,n){return de(`${t}/api/v1/playlists/${e}?page=${n}`).then(s=>({author:s?.author,title:s.title,thumbnail:s.playlistThumbnail||s?.authorThumbnails?.[0]?.url,videos:s.videos,subtitle:s.subtitle}))}async function Mn(e,t,n){return fetch(`${t}/api/v1/channels/${e}?page=${n}`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>({author:s.author,thumbnail:s.authorThumbnails[0].url,videos:s.latestVideos}))}async function Nn(e){return de(`https://ytify-backend.vercel.app/api/album/${e}`)}const jt=()=>({isLoading:!1,isSubscribed:!1,isSortable:!1,isReversed:!1,isShared:!1,list:[],length:0,reservedCollections:["history","favorites","listenLater","channels","playlists"],name:"",url:"",type:"collection",id:"",page:1,uploader:"",thumbnail:"",artistAlbums:[],observer:{disconnect(){}}}),[Q,S]=ne(jt());async function ie(e,t,n=w.invidious.length-1){if(t==="mix"){const s=await Vn(e,ae(n));ce("list",[...s]);return}if(S("isLoading",!0),te("list","state",!0),t==="playlist"){const s=await Qe(e,ae(n),Q.page).catch(u=>{if(n===0)return b("snackbar",u.message),n=w.invidious.length,re(),{};ie(e,t,n-1)});if(!s)return;const{author:i,title:o,thumbnail:r,videos:a}=s,l=tt("playlists").find(u=>u.id===e),c=l?ee(l?.thumbnail,"720"):"";S({name:l?.name||o,thumbnail:c||r||Q.thumbnail||ee(a[0].videoId,"maxres"),id:e,uploader:i,type:"playlists",url:e,list:a.map(u=>({id:u.videoId,title:u.title,author:e.startsWith("OLAK5uy")&&!u.author.endsWith(" - Topic")?`${u.author} - Topic`:u.author,authorId:u.authorId,duration:z(u.lengthSeconds)}))})}if(t==="channel"){const s=await Mn(e,ae(n),Q.page).catch(a=>{if(n===0)return b("snackbar",a.message),n=w.invidious.length,re(),{author:"",thumbnail:"",videos:[]};ie(e,t,n-1)});if(!s)return;const{author:i,thumbnail:o,videos:r}=s;S({name:i,thumbnail:o,id:e,uploader:i,type:"channels",url:e,list:r.map(a=>({id:a.videoId,title:a.title,author:a.author,authorId:a.authorId,duration:z(a.lengthSeconds)}))})}if(t==="artist"){const s=await jn(e).catch(c=>{if(n===0)return b("snackbar",c.message),n=w.invidious.length,re(),{};ie(e,t,n-1)});if(!s)return;const{playlistId:i,artistName:o,albums:r}=s,a=await Qe(i,ae(n),Q.page).catch(c=>{if(n===0)return b("snackbar",c.message),n=w.invidious.length,re(),{};ie(e,t,n-1)});if(!a)return;const{videos:l}=a;S({name:"Artist - "+o,id:e,type:"channels",url:e,list:l.map(c=>({id:c.videoId,title:c.title,author:c.author.endsWith(" - Topic")?c.author:`${c.author} - Topic`,authorId:c.authorId,duration:z(c.lengthSeconds)})),artistAlbums:r.filter(c=>c.id&&c.title&&c.thumbnail)})}if(t==="album"){const s=await Nn(e).catch(u=>{if(n===0)return b("snackbar",u.message),n=w.invidious.length,re(),{};ie(e,t,n-1)});if(!s)return;const{thumbnail:i,playlistId:o}=s,r=await Qe(o,ae(n),Q.page).catch(u=>{if(n===0)return b("snackbar",u.message),n=w.invidious.length,re(),{};ie(e,t,n-1)});if(!r)return;const{title:a,videos:l,subtitle:c}=r;S({thumbnail:ee(ve(i),"720"),id:o,url:e,type:"playlists",name:a,uploader:c.replace(" â€¢ Album",""),list:l.map(u=>({id:u.videoId,title:u.title,author:u.author.endsWith(" - Topic")?u.author:`${u.author} - Topic`,authorId:u.authorId,duration:z(u.lengthSeconds)}))})}S("isLoading",!1)}function re(){te("home","state",!0),Tn("list"),Q.observer.disconnect(),B("collection"),S(jt())}let ke;async function rt(e){if(ke&&ke.abort(),ke=new AbortController,!e)return;const t=!h.isMusic&&h.isWatching;if(t||I({playbackState:"loading",status:"Loading Audio..."}),!w.useSaavn)b("useSaavn",!0);else if(h.stream.author.endsWith("Topic"))return d(()=>import("./jioSaavn-BCani_Uz.js"),[]).then(s=>s.default());w.invidious.length||b("snackbar","No Instances are Available");const n=await d(()=>import("./getStreamData-CCrTSrwP.js"),[]).then(s=>s.default(e,!1,ke.signal));if(n&&"audioStreams"in n)I({data:n,fullDuration:n.duration});else{I({playbackState:"none",status:n.message||n.error||"Loading Audio Failed"}),b("snackbar",h.status);return}await d(()=>import("./setMetadata-CgmHC--7.js"),[]).then(s=>s.default({id:e,title:n.title,author:n.uploader,duration:z(n.duration),authorId:n.uploaderUrl.slice(9)})),d(()=>import("./setAudioStreams-C3E88ao1.js"),[]).then(s=>s.default(n.audioStreams.sort((i,o)=>parseInt(i.bitrate)-parseInt(o.bitrate)))),g.enqueueRelatedStreams&&!t&&d(()=>import("./enqueueRelatedStreams-NUw0ox8a.js"),[]).then(s=>s.default(n.relatedStreams)),g.discover&&d(()=>import("./setDiscoveries-DiQ_O5bR.js"),__vite__mapDeps([21,17])).then(s=>{setTimeout(()=>{s.default(e,n.relatedStreams)},1e5)})}const ws=e=>e?.match(/(https?:\/\/)?((www\.)?(youtube(-nocookie)?|youtube.googleapis)\.com.*(v\/|v=|vi=|vi\/|e\/|embed\/|user\/.*\/u\/\d+\/)|youtu\.be\/)([_0-9a-z-]+)/i)?.[7],ae=(e=w.index)=>w.invidious[e],Un=e=>e.includes("=")?"playlists="+e.split("=")[1]:e.slice(1).split("/").join("="),Ss=e=>w.linkHost+(w.linkHost.includes(location.origin)?e.startsWith("/watch")?"?s"+e.slice(8):"?"+Un(e):e),de=async(e,t)=>fetch(e,{signal:t}).then(n=>{if(!n.ok)throw new Error(`Network response was not ok: ${n.statusText}`);return n.json()});function As(e,t){const n=!!document.querySelector("video"),s=h.stream.author.endsWith("- Topic")&&!n;t||I("status",Fe("player_audiostreams_insert"));const o=new URL(e).origin,r=ae(0);return s?e.replace(o,r):e}async function Is(){const{audio:e,stream:t,playbackState:n}=h;if(!t.id)return;n==="playing"&&e.pause();const s=e.currentTime;await rt(t.id),I("currentTime",s),e.play()}async function Es(e){const t=await h.supportsOpus?"opus":"aac",n={worst:{opus:[600,249,251],aac:[599,139,140]},low:{opus:[249,600,251],aac:[139,599,140]},medium:{opus:[250,249,251],aac:[139,140]},high:{opus:[251],aac:[140]},lossless:{opus:[251],aac:[140]}}[g.quality||"medium"][t];let s;for(const i of n){if(s?.url)continue;const o=e.find(r=>r.url.includes(`itag=${i}`));o&&(s=o)}return s}function z(e){if(e<0)return"";if(e===1/0)return"Emergency Mode";const t=Math.floor(e/3600);e%=3600;const n=Math.floor(e/60),s=Math.floor(e%60);let i=String(n),o=String(s);return n<10&&(i="0"+i),s<10&&(o="0"+o),(t>0?t+":":"")+`${i}:${o}`}const qn=e=>Intl.NumberFormat("en",{notation:"compact"}).format(e);function ks(e){const t=i=>i.includes("drc%3D1"),n=g.stableVolume&&!!e.find(i=>t(i.url)),s=i=>!i.url.includes("acont%3Ddubbed");return e.filter(i=>n?t(i.url):!t(i.url)).filter(s)}function Os(e){b("snackbar",Fe("actions_menu_download_init"));const t="https://youtu.be/"+e;fetch("https://cobalt-api.meowing.de",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({url:t,downloadMode:"audio",audioFormat:w.downloadFormat,filenameStyle:"basic"})}).then(s=>s.json()).then(async s=>{let i,o="";if("tunnel"in s&&s.tunnel.length>0)i=s.tunnel[0],o=s.output.filename,await navigator?.clipboard?.writeText(o),b("snackbar","Filename copied to clipboard");else if("url"in s)i=s.url;else if("error"in s)throw new Error(s.error?.code||"Invalid response from download server");if(i){const r=document.createElement("a");r.href=i,r.download=o,r.click()}else throw new Error("No download link found")}).catch(s=>{b("snackbar",s.message)})}function ee(e,t,n){const s="https://wsrv.nl?url=https://";let i="",o="";if(e.startsWith("/"))o=`yt3.googleusercontent.com${e}=s720-c-k-c0x00ffffff-no-rj`,i=`&output=webp&w=${t==="mq"?"180":t||"360"}`;else if(o=`i.ytimg.com/vi_webp/${e}/${t}default.webp`,n){const r=t==="mq"?"180":"720";i=`&w=${r}&h=${r}&fit=cover`}return s+o+i}function ve(e){if(!e)return"";if(e.startsWith("/vi_webp")&&(e=e.slice(9,20)),e.startsWith("/")||e.length===11)return e;e.includes("wsrv.nl")&&(e=e.replace("https://wsrv.nl?url=",""));const t=new URL(e),n=t.pathname;return t.search.includes("ytimg")||t.hostname==="i.ytimg.com"?n.split("/")[2]:n.split("=")[0]}const _t=document.documentElement.style,q=_t.setProperty.bind(_t),Fn=document.head.children.namedItem("theme-color"),Vt=matchMedia("(prefers-color-scheme:dark)");function Hn(e,t,n){let s=Math.min(e,t,n);return(e+t+n)/s>14&&(e=Math.floor(e/3),t=Math.floor(t/3),n=Math.floor(n/3),s=Math.floor(s/3)),`rgb(${e-s}, ${t-s},${n-s})`}const Oe={light:{bg:"#fff",text:"#000",multiplier:"1.1"},dark:{bg:"#000",text:"#fff",multiplier:"0.9"}};function vt(e){const t=Vt.matches;Promise.resolve().then(()=>{const{theme:n}=g,s=n==="auto"?t?"dark":"light":n,[i,o,r]=e;Math.abs(i-o)<10&&Math.abs(o-r)<10?q("--chroma","0"):q("--chroma","1"),q("--trueBg",s==="light"?"var(--scheme)":"var(--bg)"),q("--source",Hn(i,o,r)),q("--bg",Oe[s].bg),q("--schemeMultiplier",Oe[s].multiplier),q("--text",Oe[s].text),Fn.content=Oe[s].bg})}function at(){const e="220, 220, 220",{stream:t}=h,{loadImage:n}=g;n&&t.id?d(()=>import("./extractColorFromImage-N3D8rwKz.js"),[]).then(s=>s.default).then(s=>s(ee(t.id,"mq"),!0)).then(vt):vt(e.split(",").map(s=>parseInt(s)))}g.roundness!=="0.4rem"&&q("--roundness",g.roundness);Vt.addEventListener("change",at);const Wn=()=>{const e=localStorage.getItem("library_meta");if(e)return JSON.parse(e);const t={version:4,tracks:0},n=Date.now(),s=pe();Object.keys(s).length>0&&(t.tracks=n);const i=he();for(const a of i)t[a]=n;return tt("channels").length>0&&(t.channels=n),tt("playlists").length>0&&(t.playlists=n),t},he=()=>{const e=Object.keys(localStorage).filter(s=>s.startsWith("library_")).map(s=>s.slice(8)).filter(s=>!["channels","playlists","tracks","meta"].includes(s)),t=["history","favorites","liked","listenLater"],n=JSON.parse(localStorage.getItem("library_meta")||"{}");return[...t.filter(s=>e.includes(s)),...e.filter(s=>!t.includes(s)).sort((s,i)=>(n[s]||0)-(n[i]||0))]},pe=()=>JSON.parse(localStorage.getItem("library_tracks")||"{}"),Z=e=>JSON.parse(localStorage.getItem("library_"+e)||"[]"),tt=e=>JSON.parse(localStorage.getItem("library_"+e)||"[]");function Ts(e){const t=Z(e),n=pe();return t.map(s=>n[s]).filter(Boolean)}function lt(e){localStorage.setItem("library_tracks",JSON.stringify(e))}function ct(e,t){localStorage.setItem("library_"+e,JSON.stringify(t))}function Ls(e,t){localStorage.setItem(`library_${e}`,JSON.stringify(t))}function Bn(e,t){const n=Z(e),s=pe(),i=["history","favorites"].includes(e);for(const o of t){const{id:r}=o,a=n.indexOf(r);if(a!==-1&&n.splice(a,1),i?n.unshift(r):n.push(r),r in s){const l=s[r];l.plays=(l.plays||1)+1,g.dbsync&&d(async()=>{const{addDirtyTrack:c}=await import("./cloudSync-CXuBuSNF.js");return{addDirtyTrack:c}},[]).then(({addDirtyTrack:c})=>{c(r)})}else s[r]=o,g.dbsync&&d(async()=>{const{addDirtyTrack:l}=await import("./cloudSync-CXuBuSNF.js");return{addDirtyTrack:l}},[]).then(({addDirtyTrack:l})=>{l(r)})}ct(e,n),lt(s),ue(e)}function Ps(e,t){const n=Z(e),s=he().filter(o=>o!==e),i=pe();for(const o of t){const r=n.indexOf(o);r!==-1&&n.splice(r,1);let a=!1;for(const l of s)if(Z(l).includes(o)){a=!0;break}a||(delete i[o],g.dbsync&&d(async()=>{const{removeDirtyTrack:l}=await import("./cloudSync-CXuBuSNF.js");return{removeDirtyTrack:l}},[]).then(({removeDirtyTrack:l})=>{l(o)}))}ct(e,n),lt(i),ue(e),Q.type==="collection"&&S("list",o=>o.filter(r=>!t.includes(r.id)))}function $s(e){const t=Z(e),n=he().filter(i=>i!==e),s=pe();for(const i of t){let o=!1;for(const r of n)if(Z(r).includes(i)){o=!0;break}o||(delete s[i],g.dbsync&&d(async()=>{const{removeDirtyTrack:r}=await import("./cloudSync-CXuBuSNF.js");return{removeDirtyTrack:r}},[]).then(({removeDirtyTrack:r})=>{r(i)}))}localStorage.removeItem("library_"+e),lt(s),ue(e,!0)}const ue=(e,t)=>{const n=Wn(),s=Date.now();he().includes(e)&&(n.tracks=s),t?delete n[e]:n[e]=s,localStorage.setItem("library_meta",JSON.stringify(n)),w.syncState!=="syncing"&&(b("syncState","dirty"),g.dbsync&&d(async()=>{const{scheduleSync:i}=await import("./cloudSync-CXuBuSNF.js");return{scheduleSync:i}},[]).then(({scheduleSync:i})=>{i()}))};function Cs(e){if(he().includes(e)){b("snackbar",Fe("list_already_exists"));return}ue(e)}function Ds(e,t){if(e===t)return;if(he().includes(t)){b("snackbar",Fe("list_already_exists"));return}const s=Z(e);ct(t,s),localStorage.removeItem("library_"+e),ue(e,!0),ue(t)}async function Rs(e,t=!1){if(!e)return;const{ref:n,state:s}=M.list;s&&n&&n.scrollIntoView({behavior:"smooth"}),S("isLoading",!0);const i=t?"Shared Collection":e,{reservedCollections:o}=Q,r=o.includes(e);S({name:decodeURIComponent(i),isReversed:r,isShared:t}),t?(await Jn(e),B("si",e)):(Kn(e),B("collection",e)),te("list","state",!0),S("isLoading",!1),document.title=i+" - ytify"}function Mt(e){const t=document.querySelector(".listContainer > :last-child");if(!t)return;const n=new IntersectionObserver((s,i)=>s.forEach(o=>{o.isIntersecting&&(i.disconnect(),e()&&Mt(e))}));n.observe(t),S("observer",n)}function Kn(e){let t=Z(decodeURI(e));if(t.length===0){b("snackbar","No items found"),S({list:[],length:0,name:e});return}const n=pe();let s=t;if(g.sortOrder!=="modified"){const o=t.map(a=>n[a]);s=Yn(o,g.sortOrder).map(a=>a.id)}const i=s.length>10;if(S({name:e,length:s.length}),i){let o=20;S("list",s.slice(0,o).map(a=>n[a]));const r=()=>{if(o>=s.length)return 0;const a=s.slice(o,o+20);return o+=20,S("list",l=>[...l,...a.map(c=>n[c])]),s.length-o};setTimeout(()=>Mt(r),100)}else S("list",s.map(o=>n[o]));S("id",decodeURI(e))}async function Jn(e){S("isLoading",!0);const t=await fetch(`${location.origin}/blob/${e}`).then(n=>n.json()).catch(()=>"");t?S("list",t):b("snackbar","Collection does not exist"),S("isLoading",!1)}function Yn(e,t){if(t==="modified")return e;const n=[...e];return n.sort((s,i)=>{switch(t){case"name":return s.title.localeCompare(i.title);case"artist":return(s.author||"").localeCompare(i.author||"");case"duration":const o=r=>{const a=r.split(":").map(Number);return a.length===3?a[0]*3600+a[1]*60+a[2]:a.length===2?a[0]*60+a[1]:0};return o(s.duration)-o(i.duration);default:return 0}}),n}var Qn=["ar","bn","de","en","es","fr","fr","hi","id","ja","pl","pt","ro","ru","sa","tr","ur","zh"];const wt=navigator.language.slice(0,2),Gn=g.language||(Qn.includes(wt)?wt:"en"),[nt,Xn]=ne({locale:Gn,translations:{}});function Fe(e,t=""){const s=nt.translations[e]||e;return t?s.replace("$",t):s}async function zn(){document.documentElement.lang=nt.locale;const e=await pn(Object.assign({"../../locales/ar.json":()=>d(()=>import("./ar-kt6MiknF.js"),[]),"../../locales/bn.json":()=>d(()=>import("./bn-DOuPiQTb.js"),[]),"../../locales/de.json":()=>d(()=>import("./de-CJq7kvuJ.js"),[]),"../../locales/en.json":()=>d(()=>import("./en-7-f7u6E3.js"),[]),"../../locales/es.json":()=>d(()=>import("./es-DfFPXYai.js"),[]),"../../locales/fr.json":()=>d(()=>import("./fr-Ctzrr7oi.js"),[]),"../../locales/frc.json":()=>d(()=>import("./frc-DJWXlxco.js"),[]),"../../locales/hi.json":()=>d(()=>import("./hi-tqZM9wD9.js"),[]),"../../locales/id.json":()=>d(()=>import("./id-KCQitF3s.js"),[]),"../../locales/ja.json":()=>d(()=>import("./ja-DI2Fr8md.js"),[]),"../../locales/pl.json":()=>d(()=>import("./pl-DFZ9YR5B.js"),[]),"../../locales/pt.json":()=>d(()=>import("./pt-B-Fs8qGA.js"),[]),"../../locales/ro.json":()=>d(()=>import("./ro-ClvjsWDp.js"),[]),"../../locales/ru.json":()=>d(()=>import("./ru-DzyT3zWc.js"),[]),"../../locales/sa.json":()=>d(()=>import("./sa-C4dKdxWy.js"),[]),"../../locales/tr.json":()=>d(()=>import("./tr-DOevm1ca.js"),[]),"../../locales/ur.json":()=>d(()=>import("./ur-B6MhXg5l.js"),[]),"../../locales/zh.json":()=>d(()=>import("./zh-BCHD9KfC.js"),[])}),`../../locales/${nt.locale}.json`,4);return Xn("translations",e.default),!0}var Zn=qe("<nav><i aria-label=Queue class=ri-order-play-fill></i><i aria-label=Hub class=ri-store-2-line></i><i aria-label=Library class=ri-archive-stack-line></i><i aria-label=Search class=ri-search-2-line>");function es(){function e(n){w.homeView===n&&M.home.state?te("home","state",!1):(b("homeView",n),_n("home",n),On("home",M.home.ref))}const t=n=>M.home.state&&w.homeView===n;return(()=>{var n=Zn(),s=n.firstChild,i=s.nextSibling,o=i.nextSibling,r=o.nextSibling;return s.$$click=()=>{te("queue","state",!M.queue.state)},i.$$click=()=>e("Hub"),o.$$click=()=>e("Library"),r.$$click=()=>e("Search"),Ce(a=>{var l=!!M.queue.state,c=!!t("Hub"),u=!!t("Library"),f=!!t("Search");return l!==a.e&&s.classList.toggle("on",a.e=l),c!==a.t&&i.classList.toggle("on",a.t=c),u!==a.a&&o.classList.toggle("on",a.a=u),f!==a.o&&r.classList.toggle("on",a.o=f),a},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()}un(["click"]);var ts=qe("<main>"),ns=qe("<div class=floating-player-container>"),ss=qe("<footer>");const os=J(()=>d(()=>import("./MiniPlayer-BZ528-5B.js"),__vite__mapDeps([22,13,14,23]))),is=J(()=>d(()=>import("./index-C5f6N8Yh.js"),__vite__mapDeps([24,13,6,25]))),rs=J(()=>d(()=>import("./SnackBar-DZIB21uZ.js"),[]));function as(){return Jt(async()=>{await d(()=>import("./start-BSCZbpYf.js"),[]).then(e=>e.default()),b("syncState","synced"),g.dbsync&&(b("syncState","synced"),d(async()=>{const{runSync:e}=await import("./cloudSync-CXuBuSNF.js");return{runSync:e}},[]).then(({runSync:e})=>{e(g.dbsync)}))}),[(()=>{var e=ts();return Le(e,V(rn,{get each(){return Object.values(M)},children:t=>V(Ee,{get when(){return t.state},get children(){return V(t.component,{})}})})),e})(),V(Ee,{get when(){return an(()=>!M.player.state)()&&h.playbackState!=="none"},get children(){var e=ns();return Le(e,V(os,{})),e}}),(()=>{var e=ss();return Le(e,V(es,{})),e})(),V(Ee,{get when(){return w.actionsMenu?.id},get children(){return V(is,{})}}),V(Ee,{get when(){return w.snackbar},get children(){return V(rs,{})}})]}zn().then(()=>{at(),cn(()=>V(as,{}),document.body)});export{Ds as $,X as A,Rs as B,_n as C,k as D,ws as E,I as F,rt as G,Wn as H,he as I,pe as J,ct as K,lt as L,M,ds as N,fs as O,hs as P,On as Q,Q as R,Ee as S,Cs as T,ce as U,Ts as V,gs as W,an as X,$s as Y,re as Z,d as _,g as a,tt as a0,ve as a1,Ls as a2,rn as a3,Yt as a4,ee as a5,ue as a6,Tn as a7,B as a8,q as a9,Ss as aa,Cn as ab,zn as ac,Xn as ad,Is as ae,at as af,Es as ag,ks as ah,As as ai,z as aj,Y as ak,us as al,_s as am,vs as an,bs as ao,$ as ap,ys as aq,Ce as b,V as c,un as d,w as e,G as f,Ht as g,Z as h,Le as i,Bn as j,Ln as k,J as l,Fe as m,ie as n,Jt as o,h as p,it as q,Ps as r,te as s,qe as t,b as u,Os as v,S as w,cn as x,ps as y,ms as z};
