import{o as w,a4 as y,t as I,i as c,c as q,a3 as R,q as M,z as x,U as b,f as T,C as _,a as S,k as D,u as E,m as f,b as Q,d as F,Q as U}from"./index-BIf49YX_.js";import{S as j}from"./StreamItem-BlEJqt2S.js";import{S as z}from"./sortable.esm-DdTU3J9A.js";var B=I("<div id=queuelist>");function N(m){let d,v;return w(()=>{d&&(v=new z(d,{handle:".ri-draggable",onUpdate(l){l.oldIndex==null||l.newIndex==null||b("list",s=>{const i=[...s],[a]=i.splice(l.oldIndex,1);return i.splice(l.newIndex,0,a),i})}}))}),y(()=>{v.destroy(),console.log("sortable destroy")}),(()=>{var l=B(),s=d;return typeof s=="function"?x(s,l):d=l,c(l,q(R,{get each(){return M.list},children:(i,a)=>q(j,{get id(){return i.id},get title(){return i.title},get author(){return i.author},get duration(){return i.duration},get authorId(){return i.authorId},draggable:!0,get removeMode(){return m.removeMode},get context(){return{src:"queue",id:a().toString()}}})})),l})()}var A=I("<section id=queue><ul id=queuetools><li><i class=ri-shuffle-line></i></li><li><i class=ri-indeterminate-circle-line></i></li><li><i class=ri-filter-2-line></i></li><li><i class=ri-file-copy-line></i></li><li><i class=ri-list-check-2></i></li><li><i class=ri-close-large-line>");function K(){let m,d;const[v,l]=T(!1);return w(()=>{U("queue",m)}),(()=>{var s=A(),i=s.firstChild,a=i.firstChild;a.firstChild;var h=a.nextSibling;h.firstChild;var $=h.nextSibling;$.firstChild;var p=$.nextSibling;p.firstChild;var g=p.nextSibling;g.firstChild;var L=g.nextSibling;L.firstChild;var C=m;typeof C=="function"?x(C,s):m=s,a.$$click=e=>{const t=e.target;t.tagName==="I"?(t.parentElement.classList.toggle("on"),_("shuffle",!S.shuffle)):b("list",o=>{const n=[...o];for(let r=n.length-1;r>0;r--){const u=Math.floor(Math.random()*(r+1));[n[r],n[u]]=[n[u],n[r]]}return n})},c(a,()=>f("upcoming_shuffle"),null),h.$$click=()=>{l(!v())},c(h,()=>f("upcoming_remove"),null),$.$$click=e=>{const t=e.currentTarget;t.classList.toggle("on"),_("filterLT10",t.classList.contains("on")),D(M.list,{replace:!0})},c($,()=>f("upcoming_filter_lt10"),null),p.$$click=e=>{const t=e.currentTarget;t.classList.toggle("on");const o=t.classList.contains("on");_("allowDuplicates",o),o||b("list",n=>{const r=new Set;return n.filter(u=>r.has(u.id)?!1:(r.add(u.id),!0))})},c(p,()=>f("upcoming_allow_duplicates"),null),g.$$click=e=>{const t=e.currentTarget;t.classList.toggle("on"),_("enqueueRelatedStreams",t.classList.contains("on")),E("snackbar",f("upcoming_change"))};var k=d;return typeof k=="function"?x(k,g):d=g,c(g,()=>f("upcoming_enqueue_related"),null),L.$$click=()=>{b("list",[])},c(L,()=>f("upcoming_clear"),null),c(s,q(N,{get removeMode(){return v()}}),null),Q(e=>{var t=!!S.shuffle,o=!!v(),n=!!S.filterLT10,r=!!S.allowDuplicates,u=!!S.enqueueRelatedStreams;return t!==e.e&&a.classList.toggle("on",e.e=t),o!==e.t&&h.classList.toggle("on",e.t=o),n!==e.a&&$.classList.toggle("on",e.a=n),r!==e.o&&p.classList.toggle("on",e.o=r),u!==e.i&&g.classList.toggle("on",e.i=u),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s})()}F(["click"]);export{K as default};
