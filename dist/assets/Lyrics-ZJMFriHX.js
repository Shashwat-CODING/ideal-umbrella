import{f as m,o as F,a4 as M,F as v,t as $,i as b,c as I,b as x,a3 as j,z as w,p as f,u as g}from"./index-BIf49YX_.js";var z=$("<div class=lyrics>"),A=$("<p>");function N(p){const[L,S]=m(["Loading..."]),[h,_]=m(-1);let a;return F(()=>{const{title:e,author:c}=f.stream;fetch(`https://lrclib.net/api/get?track_name=${e}&artist_name=${c.slice(0,-8)}&duration=${f.fullDuration}`,{headers:{"Lrclib-Client":"ytify v8 22.11.25 (https://github.com/n-ce/ytify)"}}).then(r=>r.json()).then(r=>{const o=r.syncedLyrics,s=r.duration,d=f.fullDuration;let y=0;if(s&&d&&(y=(d-s)/2),o){const l=[],k=o.split(`
`).map(u=>{const[t,i]=u.split("]");if(!i)return"...";const[n,C]=t.substring(1).split(":"),D=parseInt(n)*60+parseFloat(C);return l.push(D-y),i});S(k),v({lrcSync:u=>{let t=-1;const{length:i}=l;for(let n=0;n<i&&l[n]<=u;n++)t=n;if(t!==h()){if(_(t),t<0)return;a.children[t]&&a.children[t].scrollIntoView({block:"center",behavior:"smooth"})}}})}else g("snackbar","No lyrics found for this track."),p.onClose()}).catch(()=>{g("snackbar","Failed to fetch lyrics."),p.onClose()})}),M(()=>{v("lrcSync",void 0)}),(()=>{var e=z(),c=a;return typeof c=="function"?w(c,e):a=e,b(e,I(j,{get each(){return L()},children:(r,o)=>(()=>{var s=A();return b(s,r),x(()=>s.classList.toggle("active",h()===o())),s})()})),e})()}export{N as default};
